"use strict";(self.webpackChunkfusion_labs=self.webpackChunkfusion_labs||[]).push([[338],{81(s,t,e){e.d(t,{n:()=>i});class i{getEraseSize(s,t){return t}}},338(s,t,e){e.d(t,{ESP32ROM:()=>a});var i=e(81);class a extends i.n{constructor(){super(...arguments),this.CHIP_NAME="ESP32",this.IMAGE_CHIP_ID=0,this.EFUSE_RD_REG_BASE=1073061888,this.DR_REG_SYSCON_BASE=1073111040,this.UART_CLKDIV_REG=1072955412,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612856,this.XTAL_CLK_DIVIDER=1,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=4096,this.SPI_REG_BASE=1072963584,this.SPI_USR_OFFS=28,this.SPI_USR1_OFFS=32,this.SPI_USR2_OFFS=36,this.SPI_W0_OFFS=128,this.SPI_MOSI_DLEN_OFFS=40,this.SPI_MISO_DLEN_OFFS=44}async readEfuse(s,t){const e=this.EFUSE_RD_REG_BASE+4*t;return s.debug("Read efuse "+e),await s.readReg(e)}async getPkgVersion(s){const t=await this.readEfuse(s,3);let e=t>>9&7;return e+=(t>>2&1)<<3,e}async getChipRevision(s){const t=await this.readEfuse(s,3),e=await this.readEfuse(s,5),i=await s.readReg(this.DR_REG_SYSCON_BASE+124);return 0!=(t>>15&1)?0!=(e>>20&1)?0!=(i>>31&1)?3:2:1:0}async getChipDescription(s){const t=["ESP32-D0WDQ6","ESP32-D0WD","ESP32-D2WD","","ESP32-U4WDH","ESP32-PICO-D4","ESP32-PICO-V3-02"];let e="";const i=await this.getPkgVersion(s),a=await this.getChipRevision(s),h=3==a;return 0!=(1&await this.readEfuse(s,3))&&(t[0]="ESP32-S0WDQ6",t[1]="ESP32-S0WD"),h&&(t[5]="ESP32-PICO-V3"),e=i>=0&&i<=6?t[i]:"Unknown ESP32",!h||0!==i&&1!==i||(e+="-V3"),e+" (revision "+a+")"}async getChipFeatures(s){const t=["Wi-Fi"],e=await this.readEfuse(s,3);0===(2&e)&&t.push(" BT");0!==(1&e)?t.push(" Single Core"):t.push(" Dual Core");if(0!==(8192&e)){0!==(4096&e)?t.push(" 160MHz"):t.push(" 240MHz")}const i=await this.getPkgVersion(s);-1!==[2,4,5,6].indexOf(i)&&t.push(" Embedded Flash"),6===i&&t.push(" Embedded PSRAM");0!==(await this.readEfuse(s,4)>>8&31)&&t.push(" VRef calibration in efuse");0!==(e>>14&1)&&t.push(" BLK3 partially reserved");const a=3&await this.readEfuse(s,6);return t.push(" Coding Scheme "+["None","3/4","Repeat (UNSUPPORTED)","Invalid"][a]),t}async getCrystalFreq(s){const t=await s.readReg(this.UART_CLKDIV_REG)&this.UART_CLKDIV_MASK,e=s.transport.baudrate*t/1e6/this.XTAL_CLK_DIVIDER;let i;return i=e>33?40:26,Math.abs(i-e)>1&&s.info("WARNING: Unsupported crystal in use"),i}_d2h(s){const t=(+s).toString(16);return 1===t.length?"0"+t:t}async readMac(s){let t=await this.readEfuse(s,1);t>>>=0;let e=await this.readEfuse(s,2);e>>>=0;const i=new Uint8Array(6);return i[0]=e>>8&255,i[1]=255&e,i[2]=t>>24&255,i[3]=t>>16&255,i[4]=t>>8&255,i[5]=255&t,this._d2h(i[0])+":"+this._d2h(i[1])+":"+this._d2h(i[2])+":"+this._d2h(i[3])+":"+this._d2h(i[4])+":"+this._d2h(i[5])}}}}]);
//# sourceMappingURL=338.e7f2ab8d.chunk.js.map